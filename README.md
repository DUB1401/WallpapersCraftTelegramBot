# WallpapersCraft Telegram Bot
**WallpapersCraft Telegram Bot** – это кроссплатформенный скрипт для получения данных с сайта [WallpapersCraft](https://wallpaperscraft.ru/) и их отправки в канал Telegram.

## Порядок установки и использования
1. Загрузить последний релиз. Распаковать.
2. Установить Python версии не старше 3.10. Рекомендуется добавить в PATH.
3. В среду исполнения установить следующие пакеты: [dublib](https://github.com/DUB1401/dublib), [BeautifulSoup4](https://launchpad.net/beautifulsoup), [requests](https://github.com/psf/requests).
```
pip install git+https://github.com/DUB1401/dublib#egg=dublib
pip install BeautifulSoup4
pip install requests
```
Либо установить сразу все пакеты при помощи следующей команды, выполненной из директории скрипта.
```
pip install -r requirements.txt
```
4. Настроить скрипт путём редактирования _Settings.json_.
5. Открыть директорию со скриптом в терминале. Можно использовать метод `cd` и прописать путь к папке, либо запустить терминал из проводника.
6. Ввести нужную команду и дождаться завершения.

# Консольные команды
```
rp.py collect [FILTER_TYPE] [FILTER_NAME] [FLAGS]
```
Помещает список алиасов обложек, соответствующих заданному фильтру, в конец файла _Collection.txt_.

**Список специфических флагов:**
* _**-f**_ – удаляет содержимое файла коллекции перед записью.

**Список специфических ключей:**
* _**FILTER_TYPE**_:
	* _**--category**_ – указывает, что необходимо спарсить все обои в заданной категории;
	* _**--tag**_ – указывает, что необходимо спарсить все обои с заданным тегом.
___
```
rp.py parse [SLUG_TYPE] [SLUG] [FLAGS]
```
Парсит обои в формат JSON и помещает их внутрь директории _Data_.

**Список специфических флагов:**
* _**-f**_ – включает перезапись уже существующих файлов.

**Список специфических ключей:**
* _**SLUG_TYPE**_:
	* _**--category**_ – указывает, что необходимо спарсить все обои в заданной категории;
	* _**--image**_ – указывает, что необходимо спарсить обои с заданным алиасом;
	* _**--tag**_ – указывает, что необходимо спарсить все обои с заданным тегом.
___
```
rp.py send [CATEGORY] [TAGS] [RESOLUTIONS]
```
Отправляет сообщение, содержащее обои с заданными параметрами, в канал или группу Telegram. 

Категорию для фильтрации можно указать на русском языке в любом регистре либо же использовать её алиас. Для игнорирования фильтра нужно указать `:all`.

Теги для фильтрации необходимо указывать через знак `+`. Для игнорирования фильтра нужно указать `:all`.

Разрешения для фильтрации необходимо указывать через знак `+` в формате `{WIDTH}x{HEIGHT}`. Для добавления оригинального изображения указывается _original_. Максимальное допустимое количество – 10.

**Пример:** `wctb.py send 3d :all original+1920x1080` – отправляет пост с обоями из категории [3D](https://wallpaperscraft.ru/catalog/3d), с любыми тегами, задав в качестве вложений оригинальные обои и их FullHD вариант.

## Неспецифические флаги
Данный тип флагов работает при добавлении к любой команде и выполняет отдельную от оной функцию.
* _**-s**_ – выключает компьютер после завершения работы скрипта.

# Settings.json
```JSON
"token": ""
```
Сюда необходимо занести токен бота Telegram (можно получить у [BotFather](https://t.me/BotFather)).
___
```JSON
"target": ""
```
Сюда необходимо занести ID канала Telegram (можно получить у [Chat ID Bot](https://t.me/chat_id_echo_bot)).
___
```JSON
"random": true
```
Если позиция активна, то бот будет отправлять случайные обои, иначе – первые подходящие в алфавитном порядке.
___
```JSON
"delay": 3
```
Задаёт интервал в секундах для паузы между GET-запросами к сайту.

Рекомендуемое значение: не менее 3 секунд.

_Copyright © DUB1401. 2023._
